# This is a basic workflow to help you get started with Actions

name: Update page on tags (excluding data-update)

on:
    push:
        branches: [master]
        tags:
            - "*"               # Run on every tag
            - "!data-update_*"  # ignore all "data-update_yyyy-mm-dd-hh" tags

jobs:
    # First build the new gatsby page and deploy it to gh-pages branche
    gatsby:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v1
            - name: cd in right directory
              run: cd gatsby
            - uses: enriikke/gatsby-gh-pages-action@v2
              with:
                  access-token: ${{ secrets.ACCESS_TOKEN }}
                  deploy-branch: gh-pages
                  gatsby-args: --prefix-paths
    # Do a second step
    instead_of_tweet:
        runs-on: ubuntu-latest
        needs: gatsby
        steps:
            - uses: actions/checkout@v2

            # Runs a single command using the runners shell
            - name: Run a one-line script
              run: echo Hello, world! This is a test
